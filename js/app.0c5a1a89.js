(function(){"use strict";var e={6683:function(e,t,n){var s=n(9242),o=n(4329),i={pt:{title:"Políssonos - um sequenciador Midi baseado em polígonos - Digitópia, Casa da Música - Porto",timeline:"Clique e arraste para seleccionar o ponto de partida do sequenciador.","grid-item":"Clique num quadrado do sequenciador para lhe atribuir o polígono seleccionado na respectiva pista. Clique com o botão do lado,direito para remover a selecção.","play-grid":"Clique para iniciar o sequenciador no ponto seleccionado. Clique novamente para parar.",bpms:"Clique e arraste para definir o número de pulsações (batidas) por minuto.",open:'Clique para abrir um ficheiro ".psn" (Políssonos).',save:'Clique para gravar a sessão como ficheiro ".psn" (Políssonos) ou ".mid" (Midi).',"lang-pt":"Clique para alterar a linguagem para Português.","lang-en":"Click to change the language to English.",scene:"Clique num dos quadrados para seleccionar um novo polígono. Clique e arraste para copiar o polígono para uma nova posição.",note:"Clique num dos vértices para o seleccionar e activar (arraste na vertical para definir a nota da escala de imediato). Clique com,o botão do lado direito para o desactivar.","note-chooser":"Clique e arraste para definir a nota da escala a ser tocada no vértice seleccionado.",volume:"Clique e arraste para definir o volume da nota a ser tocada no vértice seleccionado. Escolha o volume 0 para obter uma pausa.",play:"Clique para tocar esta pista. Clique novamente para parar.",settings:"Clique para aceder ao menú de configuração desta pista.","settings-instrument":"Clique nas setas para escolher o instrumento da pista seleccionada.","settings-root":"Clique nas setas para escolher a transposição do modo seleccionado.","settings-scale":"Clique nas setas para escolher o modo da pista seleccionada.","settings-beats":"Clique nas setas para escolher o número de pulsações (batidas) contidos nos polígonos da pista seleccionada.","settings-subdivisions":"Clique nas setas para escolher a subdivisão de cada pulsação (batida) da pista seleccionada.",sphere:"Seleccione uma das pistas para obter uma visualizção 3D da mesma.","sphere.active":"Visualização 3D da pista seleccionada.",scale:{pentatonic:"pentatónico",dorian:"dórico",mixolydian:"mixolídio",major:"modo maior",octatonic:"octatónico"},root:{"C#":"Dó# / Réb","G#":"Sol# / Láb","D#":"Ré# / Mib","A#":"Lá# / Sib",F:"Fá",C:"Dó",G:"Sol",D:"Ré",A:"Lá",E:"Mi",B:"Si","F#":"Fá# / Solb"}},en:{title:"Políssonos - a Midi sequencer based on polygons - Digitópia, Casa da Música - Porto, Portugal",timeline:"Click and drag to set the starting offset of the sequencer.","grid-item":"Click on a sequencer square to set it to the selected polygon of each track. Click with the right button to remove the selection.","play-grid":"Click to start the sequencer on the selected offset. Click again to stop it.",bpms:"Click and drag to set the number of beats per minute.",open:'Click to open a ".psn" (Políssonos) file.',save:'Click to save the session as a ".psn" (Políssonos) or a ".mid" (Midi) file.',"lang-pt":"Clique para alterar a linguagem para Português.","lang-en":"Click to change the language to English.",scene:"Click on one of the squares to change to it's polygon. Click and drag to copy it to a new location.",note:"Click on one of the vertices to select and activate it (drag vertically to select the note immediately). Click with the right button to de-activate it again.","note-chooser":"Click and drag to select the note that shall be played on the selected vertices.",volume:"Click and drag to select the volume of the note that shall be played on the selected vertices. Select a volume of 0 to make a rest.",play:"Click to start playing this track. Click again to stop it.",settings:"Click to access the configuration menu of this track.","settings-instrument":"Click on the arrows to select the instrument of the selected track.","settings-root":"Click on the arrows to select the transposition of the selected mode.","settings-scale":"Click on the arrows to select the mode of the selected track.","settings-beats":"Click on the arrows to select the number of beats each of the polygons of the selected track will have.","settings-subdivisions":"Click on the arrows to select the a subdivision of the beat of the selected track.",sphere:"Select one of the tracks to see its 3D view.","sphere.active":"3D view of the selected track.",scale:{pentatonic:"pentatonic",dorian:"dorian",mixolydian:"mixolydian",major:"major",octatonic:"octatonic"},root:{"C#":"C# / Db","G#":"G# / Ab","D#":"D# / Eb","A#":"A# / Bb",F:"F",C:"C",G:"G",D:"D",A:"A",E:"E",B:"B","F#":"F# / Gb"}}},a=n(1373),l=n(8125),r=n(8321),c=n(3396),d=n(7139);const u={class:"app-grid"},h={class:"footer"},g={class:"help"},p={class:"lang-chooser"},m=["onClick"];function v(e,t,n,o,i,a){const l=(0,c.up)("Instrument"),r=(0,c.up)("Grid"),v=(0,c.up)("Middle");return(0,c.wg)(),(0,c.iD)("div",{onClick:t[0]||(t[0]=(...e)=>a.deselectActiveInstrument&&a.deselectActiveInstrument(...e))},[(0,c._)("div",u,[(0,c.Wm)(l,{channel:0}),(0,c.Wm)(r),(0,c.Wm)(l,{channel:3,"scene-selector-position":"right"}),(0,c.Wm)(l,{channel:1}),(0,c.Wm)(v,{id:"middle"}),(0,c.Wm)(l,{channel:4,"scene-selector-position":"right"}),(0,c.Wm)(l,{channel:2}),(0,c.Wm)(l,{channel:5,"scene-selector-position":"right"})]),(0,c._)("div",h,[(0,c._)("div",g,(0,d.zw)(e.$t(`${e.$store.state.help}`)),1),(0,c._)("div",p,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(i.langs,(t=>((0,c.wg)(),(0,c.iD)("div",{key:t.code,class:(0,d.C_)(["lang",{active:e.lang===t.code}]),onClick:(0,s.iM)((n=>e.$store.commit("setLanguage",t.code)),["stop"])},(0,d.zw)(t.name),11,m)))),128))])])])}var y=n(1722),b=n(3332);const f=["onClick","onTouchstart"],C={class:"sequence"},I=["transform"],S=["r"],w={class:"beat-points"},x=["cx","cy","r","onClick","onMouseup"],k=["points"],P={class:"label",style:{fill:"rgba(48, 48, 48, 0.5)"}},M={class:"volume-circle"},_=["d"],A=["cx","cy","r"],N={class:"scale-circle"},$=["d"],q={class:"note-points"},D=["r","cx","cy","onClick"],W={class:"buttons"};function T(e,t,n,o,i,a){const l=(0,c.up)("FontAwesomeIcon");return(0,c.wg)(),(0,c.iD)("div",{class:(0,d.C_)(["instrument",{right:"right"===n.sceneSelectorPosition}]),onClick:t[3]||(t[3]=(0,s.iM)(((...e)=>a.setSelectedInstrument&&a.setSelectedInstrument(...e)),["stop"]))},[(0,c._)("div",{class:(0,d.C_)(["scenes",{active:a.isInstrumentSelected}])},[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(a.instrument.scenes,((e,t)=>((0,c.wg)(),(0,c.iD)("div",{key:t,class:(0,d.C_)(["scene",{active:i.selectedSceneIdx===t,pending:i.nextSceneIdx===t}]),onClick:e=>a.selectScene(t),onTouchstart:e=>a.selectScene(t)},[(0,c._)("span",{class:(0,d.C_)({colored:a.sceneHasNotes(t)&&t!==i.selectedSceneIdx})},(0,d.zw)(t+1),3)],42,f)))),128))],2),(0,c._)("div",C,[((0,c.wg)(),(0,c.iD)("svg",{class:(0,d.C_)(["svg",{active:a.isInstrumentSelected}])},[(0,c._)("g",{transform:`translate(${i.cx} ${i.cy})`},[(0,c._)("circle",{class:"points-circle",cx:"0",cy:"0",r:i.rInner},null,8,S),(0,c._)("g",w,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(i.beatPoints,((e,t)=>((0,c.wg)(),(0,c.iD)("circle",{key:t,cx:e.x,cy:e.y,r:t===i.selectedBeatIdx?i.rPointSelected:i.rPoint,class:(0,d.C_)(["point",{playing:i.playingNoteIdx===t}]),onClick:(0,s.iM)((e=>a.addNote(t)),["exact"]),onMouseup:(0,s.iM)((e=>a.removeNote(t)),["middle"])},null,42,x)))),128))]),(0,c._)("polygon",{points:a.polygon},null,8,k),(0,c._)("text",P,(0,d.zw)(a.name),1),(0,c._)("g",M,[(0,c._)("path",{class:"arc",d:a.volumeArc},null,8,_),a.selectedNoteVolumeX&&a.selectedNoteVolumeY?((0,c.wg)(),(0,c.iD)("circle",{key:0,cx:a.selectedNoteVolumeX,cy:a.selectedNoteVolumeY,r:i.rPoint},null,8,A)):(0,c.kq)("",!0)]),(0,c._)("g",N,[(0,c._)("path",{class:"arc",d:a.noteArc},null,8,$),(0,c._)("g",q,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(i.notePoints,((e,t)=>((0,c.wg)(),(0,c.iD)("circle",{key:t,r:t===i.selectedNoteIdx?i.rPointSelected:i.rPoint,cx:e.x,cy:e.y,class:"point",onClick:(0,s.iM)((e=>a.selectNote(t)),["exact"])},null,8,D)))),128))])])],8,I)],2)),(0,c._)("div",W,[(0,c.Wm)(l,{icon:["fas",i.playing?"pause":"play"],class:(0,d.C_)(["play",{active:i.playing}]),onClick:t[0]||(t[0]=e=>i.playing=!i.playing)},null,8,["icon","class"]),(0,c.Wm)(l,{icon:"cog",class:(0,d.C_)(["settings",{active:a.isInstrumentSelected&&e.showSettings}]),onClick:a.toggleSettings,onTouchstart:a.toggleSettings},null,8,["class","onClick","onTouchstart"]),(0,c.Wm)(l,{icon:"paper-plane",class:(0,d.C_)(["send-midi",{active:a.sendMidi}]),onClick:a.toggleSendMidi,onTouchstart:a.toggleSendMidi,onMouseover:t[1]||(t[1]=t=>e.$store.commit("setHelp","title")),onMouseout:t[2]||(t[2]=t=>e.$store.commit("clearHelp"))},null,8,["class","onClick","onTouchstart"])])])],2)}n(6699);var O=n(65),j=n(7282);function B(e,t,n,s,o){return(e-t)/(n-t)*(o-s)+s}const F={nScenes:9,root:"C",scale:"pentatonic",beats:4,subdivisions:2,noteVolume:127,instruments:[{name:"piano",color:"rgb(255, 127, 0)"},{name:"vibraphone",color:"rgb(0, 160, 198)"},{name:"bass",color:"rgb(125, 255, 0)"},{name:"e. piano",color:"rgb(255, 255, 0)"},{name:"harp",color:"rgb(255, 88, 144)"},{name:"drums",color:"rgb(255, 0, 0)"}]},H=F.instruments.map((e=>({name:e.name,color:e.color,root:F.root,scale:F.scale,beats:F.beats,subdivisions:F.subdivisions,playing:!1,loop:null,sendMidi:!1})));H.forEach((e=>{e.scenes=[];for(let t=0;t<F.nScenes;t++){e.scenes[t]=[];for(let n=0;n<25;n++)e.scenes[t][n]=[null,F.noteVolume]}}));var E=(0,O.MT)({state:{bpm:80,lang:"pt",instruments:H,selectedInstrument:null,showSettings:!1,playing:!1,currentTick:null,help:"scene"},getters:{anyInstrumentPlaying:(e,t)=>t.instrumentsPlayingCount>=1,instrumentsPlayingCount:e=>e.instruments.filter((e=>e.playing)).length,getSelectedInstrument:e=>e.instruments[e.selectedInstrument],getInstrumentByChannel:e=>t=>e.instruments[t]},mutations:{setSelectedInstrument(e,t){e.showSettings=!1,e.selectedInstrument=t},setLanguage(e,t){e.lang=t},setInstrumentSetting(e,{idx:t,name:n,value:s}){e.instruments[t][n]=s},setHelp(e,t){e.help=t},clearHelp(e){e.help=""},toggleSettings(e){e.showSettings=!e.showSettings},toggleSendMidi(e,t){e.instruments[t].sendMidi=!e.instruments[t].sendMidi},togglePlaying(e){e.playing=!e.playing},forwardCycleSelectedInstrument(e){const t=null===e.selectedInstrument?0:(e.selectedInstrument+1)%e.instruments.length;e.showSettings=!1,e.selectedInstrument=t}}});l.vI.add(r.zc,r.XQY,r.b7W,r.XCy);var G={props:{channel:{type:Number,required:!0},sceneSelectorPosition:{type:String,default:"left",validator:e=>["left","right"].includes(e)}},data(){const e=Math.PI/8;return{playing:!1,cx:0,cy:0,w:0,h:0,beatPoints:[],notePoints:[],rPoint:6,rPointSelected:12,rInner:67,rOuter:93,selectedBeatIdx:null,selectedNoteIdx:null,selectedSceneIdx:0,nextSceneIdx:null,playingNoteIdx:null,volumeArcAng1:Math.PI+e,volumeArcAng2:-e,noteArcAng1:e,noteArcAng2:Math.PI-e,loop:null}},computed:{...(0,O.rn)(["showSettings"]),instrument(){return this.$store.getters.getInstrumentByChannel(this.channel)},color(){return this.instrument.color},name(){return this.instrument.name},root(){return this.instrument.root},scale(){return this.instrument.scale},beats(){return this.instrument.beats},subdivisions(){return this.instrument.subdivisions},sendMidi(){return this.instrument.sendMidi},isInstrumentSelected(){return this.$store.state.selectedInstrument===this.channel},data(){return this.instrument.scenes[this.selectedSceneIdx]},nPoints(){return this.beats*this.subdivisions},nScaleNotes(){return 2*j.Ci.get(`${this.root} ${this.scale}`).notes.length+1},polygon(){let e="";return this.data?(this.data.forEach(((t,n)=>{if(null===t[0])return;let{x:s,y:o}=this.getPolygonPointInArc(n,this.nPoints,this.rInner,0,2*Math.PI,this.cx,this.cy);s*=.92,o*=.92,e+=`${s},${o} `})),e):""},volumeArc(){return this.getArcPath(this.rOuter,this.volumeArcAng1,this.volumeArcAng2)},noteArc(){return this.getArcPath(this.rOuter,this.noteArcAng1,this.noteArcAng2)},selectedNoteVolumeX(){return null},selectedNoteVolumeY(){return null},scaleNotes(){const e=j.Ci.rangeOf(`${this.root} ${this.scale}`),t=e(`${this.root}3`,`${this.root}5`);return t},loopInterval(){return this.beats*this.subdivisions+"n"},defaultSelectedNoteIdx(){return Math.floor(this.scaleNotes.length/2)}},watch:{playing(){console.log("playing changed",this.playing),this.$store.state.instruments[this.channel].playing=this.playing,this.playing?this.play():this.stop()},selectedBeatIdx(){const e=this.data[this.selectedBeatIdx];console.log("noteData",e[0]),this.selectedNoteIdx=null!==e[0]?e[0]:this.defaultSelectedNoteIdx,console.log("selectedNoteIdx is now",this.selectedNoteIdx)},loopInterval(){console.log("loopInterval is now",this.loopInterval),this.loop&&(this.loop.interval=this.loopInterval)},nPoints:{handler(){this.beatPoints=[];for(let e=0;e<this.nPoints;e++){const{x:t,y:n}=this.getPolygonPointInArc(e,this.nPoints,this.rInner,0,2*Math.PI);this.beatPoints.push({x:t,y:n})}},immediate:!0},scale:{handler(){this.notePoints=[];for(let e=0;e<this.nScaleNotes;e++){const t=Math.PI/20,{x:n,y:s}=this.getNotePointInArc(e,this.nScaleNotes-1,this.rOuter,this.noteArcAng1+t,this.noteArcAng2-t);this.notePoints.push({x:n,y:s})}},immediate:!0}},created(){window.Scale=j.Ci,window.Note=j.jC,window.Tone=b,this.player=(new b.Synth).toDestination()},mounted(){this.$el.style.setProperty("--color",this.color);const e=this.$el.querySelector("svg");this.w=e.clientWidth||e.parentNode.clientWidth,this.h=e.clientHeight||e.parentNode.clientHeight,this.cx=this.w/2,this.cy=this.h/2,this.emitter.on("changeScene",(e=>{this.isInstrumentSelected&&(this.selectedSceneIdx=e)})),this.emitter.on("togglePlay",(()=>{this.isInstrumentSelected&&(this.playing=!this.playing)})),this.emitter.on("toggleSettings",(()=>{this.isInstrumentSelected&&this.toggleSettings()}))},methods:{sceneHasNotes(e){for(let t=0;t<this.nPoints;t++){const n=this.instrument.scenes[e];if(null!==n[t][0])return!0}return!1},getArcPath(e,t,n){const s=Math.sin(t)*e,o=Math.cos(t)*e,i=Math.sin(n)*e,a=Math.cos(n)*e;return`M ${s} ${o} A ${e} ${e} 0 0 0 ${i} ${a}`},getPolygonPointInArc(e,t,n,s,o){const i=(o-s)/t,a=e*i+s-Math.PI/2,l=Math.cos(a)*n,r=Math.sin(a)*n;return{x:l,y:r}},getNotePointInArc(e,t,n,s,o){const i=(o-s)/t,a=e*i+s,l=Math.sin(a)*n,r=Math.cos(a)*n;return{x:l,y:r}},addNote(e){console.log("adding note",e),this.selectedBeatIdx=e,null===this.data[e][0]&&this.$nextTick((()=>{this.data[e][0]=this.selectedNoteIdx,console.log("added note",e,this.selectedNoteIdx)}))},selectNote(e){if(null===this.selectedNoteIdx)return;this.selectedNoteIdx=e,this.data[this.selectedBeatIdx][0]=e;const t=this.scaleNotes[e];this.playNoteWrap(t),console.log("selectNote",e,t)},removeNote(e){console.log("removing note",e),this.data[e]=[null,F.noteVolume]},setSelectedInstrument(){this.isInstrumentSelected||this.$store.commit("setSelectedInstrument",this.channel)},toggleSettings(){this.setSelectedInstrument(),this.$store.commit("toggleSettings")},toggleSendMidi(){this.$store.commit("toggleSendMidi",this.channel)},selectScene(e){this.$store.getters.anyInstrumentPlaying?this.nextSceneIdx=e:this.selectedSceneIdx=e},play(){console.log("play");let e=0;const t=this.$store.getters.instrumentsPlayingCount<=1?0:"@1m";console.log("start",t),this.loop=new b.Loop((()=>{let t=e++%this.nPoints;0===t&&null!==this.nextSceneIdx&&(this.selectedSceneIdx=this.nextSceneIdx,this.nextSceneIdx=null),this.playNote(t),console.log(b.Transport.position)}),this.loopInterval).start(t),b.Transport.start(),b.start()},playNote(e){this.playingNoteIdx=e,console.log("playing inst:",this.channel,e);const t=this.data[e];if(null===t[0])return;const n=B(t[1],0,127,-60,-6),s=this.scaleNotes[t[0]];console.log(s,n),this.player.volume.value=n,console.log("vol",this.player.volume.value),this.playNoteWrap(s)},playNoteWrap(e){if(this.sendMidi){let t=y.u5.outputs[0],n=t.channels[1];n.playNote(e)}else this.player.triggerAttackRelease(e,this.loopInterval)},stop(){console.log("stop"),this.playingNoteIdx=null,this.loop.stop()}}},z=n(89);const V=(0,z.Z)(G,[["render",T]]);var Y=V;const K=e=>((0,c.dD)("data-v-3beb5bb0"),e=e(),(0,c.Cn)(),e),L={class:"root"},Z=K((()=>(0,c._)("div",{class:"timeline"},[(0,c._)("svg")],-1))),X={class:"grid"},R=K((()=>(0,c._)("div",{class:"bpms"},null,-1)));function J(e,t,n,s,o,i){const a=(0,c.up)("FontAwesomeIcon");return(0,c.wg)(),(0,c.iD)("div",L,[Z,(0,c.Wm)(a,{icon:e.playing?"pause":"play",class:(0,d.C_)(["play-grid",{playing:e.playing}]),onClick:t[0]||(t[0]=t=>e.$store.commit("togglePlaying"))},null,8,["icon","class"]),(0,c._)("div",X,[((0,c.wg)(),(0,c.iD)(c.HY,null,(0,c.Ko)(90,(e=>(0,c._)("div",{key:e,class:(0,d.C_)(["grid-item",{active:(e-1)%15===3}])},null,2))),64))]),R])}var Q={data:function(){return{state:[],row:0}},computed:{...(0,O.rn)(["playing"])}};const U=(0,z.Z)(Q,[["render",J],["__scopeId","data-v-3beb5bb0"]]);var ee=U;const te={class:"middle"},ne=(0,c._)("div",{class:"buttons"},[(0,c._)("div",{class:"save"}),(0,c._)("div",{class:"open"})],-1),se=(0,c._)("div",{class:"grid-footer"},[(0,c._)("h1",{class:"title"},"Políssonos"),(0,c._)("div",{class:"authors"})],-1);function oe(e,t,n,s,o,i){return(0,c.wg)(),(0,c.iD)("div",te,[ne,((0,c.wg)(),(0,c.j4)((0,c.LL)(e.showSettings?"Settings":"Sphere"))),se])}function ie(e,t,n,o,i,a){const l=(0,c.up)("Setting");return(0,c.wg)(),(0,c.iD)("div",{class:"controls",onClick:t[0]||(t[0]=(0,s.iM)((()=>{}),["stop"]))},[(0,c.Wm)(l,{name:"name",options:["piano","guitar","vibraphone","bass","electric","harp","drums","e. piano"],translate:!1},null,8,["options"]),(0,c.Wm)(l,{name:"root",options:["C#","G#","D#","A#","F","C","G","D","A","E","B","F#"],translate:!0}),(0,c.Wm)(l,{name:"scale",options:["pentatonic","dorian","mixolydian","major"],translate:!0}),(0,c.Wm)(l,{name:"beats",options:[3,4,5],"prepend-text":"bpm x ",translate:!1}),(0,c.Wm)(l,{name:"subdivisions",options:[1,2,3,4,5],"prepend-text":"bpm ÷ ",translate:!1})])}function ae(e,t,n,s,o,i){return(0,c.wg)(),(0,c.iD)("div",{class:(0,d.C_)(["control",`settings-${n.name}`])},[((0,c.wg)(),(0,c.iD)("svg",null,[(0,c._)("polygon",{points:"10,0 0,5 10,10",class:(0,d.C_)(["arrow",{disabled:0===i.idx}]),onClick:t[0]||(t[0]=e=>i.change(n.name,-1))},null,2)])),(0,c._)("div",null,(0,d.zw)(`${n.prependText?n.prependText:""}${n.translate?e.$t(`${n.name}.${i.value}`):i.value}`),1),((0,c.wg)(),(0,c.iD)("svg",null,[(0,c._)("polygon",{points:"0,0 10,5 0,10",class:(0,d.C_)(["arrow",{disabled:i.idx===n.options.length-1}]),onClick:t[1]||(t[1]=e=>i.change(n.name,1))},null,2)]))],2)}var le={props:{name:{required:!0,type:String},options:{required:!0,type:Array},prependText:{required:!1,type:String,default:null},translate:{required:!1,type:Boolean,default:!1}},computed:{...(0,O.Se)({instrument:"getSelectedInstrument"}),value(){return this.instrument[this.name]},idx(){return this.options.indexOf(this.value)},color(){return this.instrument?this.instrument.color:null}},watch:{color(){this.updateColor()}},mounted(){this.updateColor()},methods:{updateColor(){this.$el.style.setProperty("--color",this.color)},change(e,t){if(1!==t&&-1!==t)return;const n=this.idx+t;if(n>=this.options.length||n<=-1)return;const s=this.options[n],o={idx:this.$store.state.selectedInstrument,name:this.name,value:s};this.$store.commit("setInstrumentSetting",o)}}};const re=(0,z.Z)(le,[["render",ae]]);var ce=re,de={components:{Setting:ce}};const ue=(0,z.Z)(de,[["render",ie]]);var he=ue;const ge={class:"sphere"},pe=(0,c._)("canvas",{class:"canvas"},null,-1),me=[pe];function ve(e,t,n,s,o,i){return(0,c.wg)(),(0,c.iD)("div",ge,me)}var ye=n(1114),be={mounted(){this.init()},methods:{init(){var e=new ye.xsS,t=new ye.cPb(75,1,.1,1e3),n=new ye.CP7({canvas:this.$el.querySelector(".canvas"),antialias:!0,alpha:!0});n.setSize(400,400);var s=new ye.xo$(2.5,15,15),o=new ye.vBJ({color:"rgb(48, 48, 48)",wireframe:!0}),i=new ye.Kj0(s,o);e.add(i),t.position.z=5;var a=function(){requestAnimationFrame(a),i.rotation.x+=9e-4,i.rotation.y+=.003,n.render(e,t)};a()}}};const fe=(0,z.Z)(be,[["render",ve]]);var Ce=fe,Ie={components:{Settings:he,Sphere:Ce},computed:{...(0,O.rn)(["showSettings"])}};const Se=(0,z.Z)(Ie,[["render",oe]]);var we=Se,xe={name:"App",components:{Instrument:Y,Grid:ee,Middle:we},data(){return{langs:[{code:"pt",name:"Portugês"},{code:"en",name:"English"}]}},computed:{...(0,O.rn)(["lang"])},watch:{lang(){this.$i18n.locale=this.lang},"$store.getters.anyInstrumentPlaying"(e){console.log("anyInstrumentPlaying is now",e)}},created(){b.Transport.bpm.value=this.$store.state.bpm,this.initMidi(),this.initKeyboardShortcuts()},methods:{initMidi(){y.u5.enable().then((()=>{console.log("WebMidi enabled!")})).catch((e=>alert(e)))},initKeyboardShortcuts(){window.onkeydown=e=>{switch(e.key){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.emitter.emit("changeScene",parseInt(e.key)-1);break;case" ":this.emitter.emit("togglePlay");break;case"s":this.emitter.emit("toggleSettings");break;case"Tab":this.$store.commit("forwardCycleSelectedInstrument");break}}},deselectActiveInstrument(){this.$store.commit("setSelectedInstrument",null)},clicked(){}}};const ke=(0,z.Z)(xe,[["render",v]]);var Pe=ke,Me=n(7749);l.vI.add(r.j1w);const _e=(0,o.o)({locale:"pt",messages:i}),Ae=(0,s.ri)(Pe);Ae.component("FontAwesomeIcon",Me.GN),Ae.use(_e),Ae.use(E);const Ne=(0,a.Z)();Ae.config.globalProperties.emitter=Ne,Ae.mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,i){if(!s){var a=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],i=e[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&i||a>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[r])}))?s.splice(r--,1):(l=!1,i<a&&(a=i));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,a=s[0],l=s[1],r=s[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(r)var d=r(n)}for(t&&t(s);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},s=self["webpackChunkpolissonos_web"]=self["webpackChunkpolissonos_web"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(6683)}));s=n.O(s)})();
//# sourceMappingURL=app.0c5a1a89.js.map